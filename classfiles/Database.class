<?php
 /*  Class:  Database
  *  Desc:   Class that connects to a MySQL database.
  */
class Database
{
  private $cxn;             // database connection object
  private $database_name;
  private $db;
  private $host;
  private $user;
  private $password;
  private $collection;
  private $grid;
  
  function __construct($filename)	//connect to mongo database  
  {
    include("$filename");		//file from the valid user data come from to longin to the perticular database in mongo
     try {
      $this->cxn = new Mongo($mongoconnectionstring);
      
    }
    catch ( Exception $e ) {
      throw new Exception ( "Oops! Error connecting to MongoDB: " . $e->getMessage() );
   }
    //$this->host = $host;   	#25
	
    //$this->user = $user;
	
    //$this->password = $passwd;
	
  }

   function useDatabase()	//	use selected database 
  {
  try
  {
    
      $this->database_name = "orchestra_c0d925ea_40a09";
      $this->db= $this->cxn->selectDB($this->database_name);
      
    }
    catch ( Exception $e )                                                #55
    {
      throw new Exception("Database $dbname not found.");
      
    }
  }
  function setCollection($colle)		//set the perticulr collection
  {
	 $this->collection=$this->db->selectCollection($colle);
	 //echo $this->collection;
	 }
  function getCollection()
  {
	return $this->collection;
   }
  function getdbConnection()
  {
	return $this->db;
  }
  function getConnection()
  {
     return $this->cxn;
  }
  function setgridFS()
  {
	$this->grid=$this->db->getGridFS();
  }
  function getgridFS()
  {
	return $this->grid;
  }
  function getDatabaseName()
  {
     return $this->database_name;
  }
  function shutdown()	//close the database connection
    {
        $this->db = null;
        $this->cxn->close();
    }
}
?>
